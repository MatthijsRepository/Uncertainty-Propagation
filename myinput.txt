input CSV
	CSV A
		header: true
		delimiter: ';'
		file: "C:\Users\mate\Desktop\python\Uncertainty-Propagation\testdata.csv"
		structure: Time, zenith, G, T, Pout
		timeformat: %H:%M:%S
	END CSV A
end input CSV

input BASIC VARIABLES
	var CSV_Time
		value: CSV.Time
	end var CSV_Time
	var zenith
		value: CSV.zenith
		timestep: CSV
		description: solar zenith angle per timestep
	end var zenith
	var T
		value: CSV.T
		timestep: CSV
		description: Temperature
		aggregation: average
		UNCERTAINTIES:
			-temperature uncertainty: absolute, shape=normal, symmetric, correlation=1, sigma=0.5, include=True
		end UNCERTAINTIES
	end var T
	var Pout
		value: CSV.Pout
		timestep: CSV
		description: Power output
		aggregation: sum
		rate over time: True
		UNCERTAINTIES:
			-single module rating at STC: relative, shape=normal, symmetric, correlation=1, sigma=1.5, include=True
		END UNCERTAINTIES
	end var Pout
	var S
		value: 15
		description: Pyranometer sensitivity
		aggregation: None
		UNCERTAINTIES:
			-calibration: 		   relative, shape=normal, symmetric, correlation=1, bound=1.5
			-non-stability: 	   relative, shape=rectangular, symmetric, correlation=1, bound=0.8
			-nonlinearity: 		   relative, shape=rectangular, symmetric, correlation=1, bound=0.5
			-clear sky spectral error: relative, shape=rectangular, symmetric, correlation=1, bound=0.5
			-temperature response: 	   relative, shape=rectangular, symmetric, correlation=1, bound=1
			-tilt response: 	   relative, shape=rectangular, symmetric, correlation=1, bound=0.5
		END UNCERTAINTIES
	end var S
	var V
		value: DETERMINE
		timestep: NONE
		description: Pyranometer voltage
		equation: 'G' * 'S'
		UNCERTAINTIES:
			-datalogger accuracy: 	absolute, shape=rectangular, symmetric, correlation=1, bound=0, include=False
			-testUncertainty: 	absolute, shape=rectangular, symmetric, correlation=1, bound=0, include=False
		END UNCERTAINTIES
	end var V
	var P0
		value: 245
		description: Module power rating at STC
	end var P0
	var G_STC
		value: 1000
		description: STC irradiance
	end var G_STC
	var gamma
		value: -0.0045
		description: relative maximum power temperature coefficient
	end var gamma
	var testA
		value: 10
		aggregation: integrate
		rate over time: True
		description: test A
		UNCERTAINTIES
			-testu: absolute, shape=rectangular, symmetric, correlation=1, bound=1
		END UNCERTAINTIES
	end var testB
	var testB
		value: 10
		description: test B
	end var testB
end input BASIC VARIABLES

input DERIVED VARIABLES
#	eq recursion_2
#		value: NO
#		equation: 'recursion_test'
#	end eq recursion_2
#	eq recursion_test
#		value: NO
#		equation: 'recursion_2'
#	end eq recursion_test
	eq test_trivial
		value: NO
		equation: 'testA'
	end eq test_trivial
	eq testC
		value: NO
		equation: ('testA'+ 'testB'*'testB' + 20) / (2 + 'testB'/'testA')
	end eq testC
	eq test_complicated
		value: NO
		equation: timesum(cos(pi*'zenith'/180))
		aggregation: average
	end eq test_complicated
	eq G
		value: CSV.G
		timestep: CSV
		description: POA irradiance
		rate over time: True
		aggregation: sum
		equation: 'V'/'S'
		UNCERTAINTIES:
			-zero off-set A: 			absolute, shape=rectangular, one-sided, correlation=0, bound=7
			-zero off-set B: 			absolute, shape=rectangular, symmetric, correlation=1, bound=2
			-zero off-set other sources: 		absolute, shape=rectangular, symmetric, correlation=1, bound=1
			-directional response: 			absolute, shape=rectangular, symmetric, correlation=1, bound=10, multiplier=1/(1000 * cos(pi*'zenith'/180))
			-additional signal processing errors: 	absolute, shape=rectangular, symmetric, correlation=1, bound=2
		END UNCERTAINTIES
	end eq G
	eq C_25
		value: NO
		description: temperature-adjustment factor
		equation: 1 + 'gamma' * ('T'-25)
		#aggregation: auto		
		aggregation: average
	end eq C_25
	eq PR
		value: NO
		description: performance ratio
		equation: (timesum('Pout', h))/(timesum('G') * ('P0'/'G_STC'))
	end eq PR
	eq PR_temp_corr
		value: NO
		description: temperature corrected performance ratio
		equation: (timesum('Pout') ) / (timesum('G' * 'C_25') * ('P0'/'G_STC'))
	end eq PR_temp_corr
	eq timesumtest
		value: NO
		description: test
		equation: timesum('G' * timesum('C_25'))
	end eq timesumtest
end input DERIVED VARIABLES


